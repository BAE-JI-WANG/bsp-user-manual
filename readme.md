# OpsNow manual system

서비스 도움말 문서를 누구나 작성해서 형상관리와 배포관리까지 할 수 있는 flow입니다. 

markdown으로 작성해서 html(online 배포용)과 pdf() 두가지로 배포할 수 있는 task runner 집합입니다.



--------------------------------------------------------------------------------


## for common


## for flow developer

UI / Task 개발자를 위한 설명입니다.

### scaffolding

디렉토리의 구조는 다음과 같습니다.

`bsp-user-manual/source/`

```
.
├── _resource           // 공통 리소스 파일
│   ├── image           // 공통으로 사용하는 이미지 있음.(brand CI 등)
│   ├── js              // 공통 js 파일
│   ├── style           // 스타일링을 위한 sass 파일
│   └── template         // pandoc markdown에서 markdown 문서를 html로 변환할때 참조하는 탬플릿 파일이 위치합니다.
└── alertnow            // 서비스의 실제 document가 있습니다.
    ├── en              // 영문 markdown 문서
    │   └── resource    // 영문 도움말의 스크린샷이 위치합니다.
    ├── ko              // 국문 markdown 문서
    │   └── resource    // 국문 도움말의 스크린샷이 위치합니다.
    └── zh              // 중문 markdown 문서
        └── resource    // 중문 도움말의 스크린샷이 위치합니다.
```





## 작성자를 위해

테크니컬 라이터 / service maintain 개발자가 마크다운 파일에서 신규 파일 생성이나 실제 컨텐트를 작성할때 아셔야 할 내용을 설명합니다.

### 파일 네이밍

마크다운 파일의 네이밍은 아래 규칙을 따릅니다.

> user_guide\_서비스명\_언어.md

예시로 보시면 

> user_guide_alertnow_ko.md
> user_guide_alertnow_en.md
> user_guide_alertnow_zh.md

**반드시 지켜주셔야 합니다**. 이름 기반으로 다국어 링크등이 추가되거나, 파일의 존재 유무를 파악합니다. 




### 이미지 네이밍

특별하게 지켜야 할 규칙은 없습니다.
지정된 경로 `/언어/resource`에 이미지를 넣어주시고 마크다운 파일에서 위치를 지정해주시면 됩니다.





### 마크다운 문법

세상에는 많고 많은 마크다운 format이 존재하지만 그중에 **pandoc markdown**을 채택했습니다.
유연하게 테이블을 지원하고 있고, html/LaTex/ePub/pdf등 다양한 포맷을 지원합니다.

기본 마크다운 문법은 여기에서 설명하지 않습니다. 기본 마크다운 문법 중 궁금하신 점은 다음의 링크를 참조해주세요 :) 
[기본 마크다운 문법](https://daringfireball.net/projects/markdown/)

기본 마크다운 외, 도움말 빌드시스템에서 반드시 알아야 할 점에 대해서 설명합니다.

#### 머리말
각 설명의 중간 제목이 되는 부분입니다. `#`을 이용해서 제목을 구분합니다.
제목은 총 6단계로 구성됩니다.

``` markdown
#
##
###
####
#####
######
```

각 제목은 html h1~h6의 heading 엘리먼트로 변환되며 왼쪽의 local navigation bar에 있는 메뉴 링크로 생성해 줍니다. 

제목 작성시 아래 문법 규칙을 준수해 주세요.

``` markdown
### 인시던트 {#incident}
 1     2        3

1:(제목의 단계)
2:(변환 후 보여질 제목)
3:(링크가 될 문장)
```

**3의 링크가 될 문장은 반드시 영문/국문/중문 동일하게 작성해주셔야 합니다**.
언어셋이 변경되도 같은 링크로 태울 수 있게 하기 위함입니다.

예시를 들면 이렇습니다.

``` markdown
### 개요 {#summary}
### summary {#summary}
```


#### 테이블


기본이 되는 테이블 문법은 아래와 같습니다.

각 행의 구분을 `-`로 하며, 열간의 구문은 `+`와 `|`로 표시합니다.
테이블 셀의 제목이 있는 경우, 제목 아래 구분선에 `=`로 표시합니다.

``` markdown
에) 열의 제목이 없는 테이블 문법
+---------+---------------------------------------------------+
| 내용 11 | 내용 12
+---------+---------------------------------------------------+
| 내용 21 | 내용 22
+---------+---------------------------------------------------+
| 내용 31 | 내용 32
+---------+---------------------------------------------------+

에) 열의 제목이 있는 테이블 문법
+---------+---------------------------------------------------+
| 제목 1  | 제목 2
+=========+===================================================+
| 내용 1  | 내용 2
+---------+---------------------------------------------------+

예) 열의 제목이 있는 테이블 문법
+---------+---------------------------------------------------+
| Preset  | 기간
+=========+===================================================+
| 전체    | 인시던트가 발생한 전체 기간을 검색합니다.
+---------+---------------------------------------------------+
| 오늘    | 현재 날짜를 선택한다.
+---------+---------------------------------------------------+
| 어제    | 어제의 날짜를 선택한다.
+---------+---------------------------------------------------+
```

테이블 안에 목록형 문법을 추가할 수 있습니다.

``` markdown
+-------------------+---------------------------------------------------------------+-----------------------------+
| 항목              |  설명                                                            비고
+===================+===============================================================+=============================+
| 서비스            |  -    신규 서비스 생성                                        | 필수 선택 사항  
|                   |       인티그레이션 생성 시, 서비스도 동시에 생성을 합니다.    | 중복 선택 불가
|                   |  -    서비스 선택                                             |
|                   |       인티그레이션 생성 시, 기존에 있는 서비스를 매핑 합니다. |
+-------------------+---------------------------------------------------------------+-----------------------------+
```

테이블 안에 html을 추가할 수 있습니다.

``` md
+---------------------------+------------------------------------------------------------------------------------------------+
| Case                    	|  설명
+===========================+================================================================================================+
| Use Case 1)               |  서비스 메뉴에서 오른쪽 상위에 있는 “서비스 생성” 버튼을 클릭 합니다.
| “서비스” 메뉴에서 생성    |  <button class="demo black">서비스 생성</button>
|                           |  서비스를 생성 합니다.
|                           |  이 경우, 서비스 이름과 에스컬레이션 규칙 설정으로 생성 할 수 있습니다.
+---------------------------+------------------------------------------------------------------------------------------------+
```


##### 테이블 작성 시 주의사항
셀 병합을 지원하지 않습니다.
셀 병합이 있는 경우 반드시 컨텐트 구성에서 케이스 따라 재량껏 풀어서 써주셔야 됩니다.

행간 구분선에 따라 테이블 셀간 넓이가 결정됩니다.

``` markdown
예) 왼쪽 셀보다 오른쪽 셀이 더 넓은 테이블이 그려집니다.

>> 마크다운 테이블 문법
+--------------------+-----------------------------------------+
|                    |  
+====================+=========================================+
|                    |  
|                    |  
|                    |  
|                    |  
+--------------------+-----------------------------------------+

>>변환 결과
...
\<col width="35%" /\>
\<col width="65%" /\>
...



예) 오른쪽 셀보다 왼쪽 셀이 더 넓은 테이블이 그려집니다.
>>마크다운 테이블 문법
+--------------------------------------+----------------------+
|                        	           |
+======================================+======================+
|                                      |
|                                      |
|                                      |
|                                      |
+--------------------------------------+----------------------+

>> 변환결과
...
\<col width="65%" /\>
\<col width="35%" /\>
...

```
예시로는 두가지 열만 보여드렸지만 다중열 테이블의 경우도 마찬가지로 눈에 보이는 셀의 넓이가 거의 그대로 반영됩니다.





#### 이미지 넣기

아래 두가지 방법 어느것을 사용하셔도 무방합니다.

``` markdown
이미지 위치를 잡고 설명을 추가하는 방법

![이미지 설명][이미지 링크]
...(중략)...
[이미지 링크]: ./resource/이미지 주소.확장자

// 예시)
![인티그레이션 설명][integration_01]
...(중략)...
[integration_01]: ./resource/bnr_service_case2_01_ko.png


-----------------------------------------------------

이미지 위치와 설명을 같이 쓰는 방법
![이미지 설명](이미지 위치)

// 예시)
![인티그레이션 설명](./resource/bnr_service_case2_01_ko.png)

```

**opsnow의 이미지 포맷은 고밀도 디스플레이(레티나, 맥북프로등...)를 지원해야 합니다**. 
따라서 스크린샷 촬영시 가급적 고밀도 디스플레이에서 촬영해 주시고.
일반 모니터(72ppi)로 촬영하셨을 경우 이미지에 `{sizez=normal}`이란 flag를 다음과 같이 붙여주세요.

``` markdown
![이미지 설명][이미지 링크]
[이미지 링크]: ./resource/이미지 주소.확장자 {sizes=normal}

![이미지 설명](이미지 위치) {sizes=normal}

// 예시)
![인티그레이션 설명][integration_01]
[integration_01]: ./resource/bnr_service_case2_01_ko.png {sizes=normal}

![인티그레이션 설명](./resource/bnr_service_case2_01_ko.png) {sizes=normal}

```

마크다운 파일을 html로 변환할때 이미지를 50% 크기로 불러오게 하는 장치가 되어있는데, `{sizes=normal}`이란 플래그를 발견하면 이미지 크기를 원래 크기대로 보여주게 html 코드가 설정됩니다.


더 자세한 설명을 원하시면 [pandoc markdown의 이미지 항목 설명][pandoc#image]을 보아주세요.












## 에디터
실시간으로 마크다운을 보여줄 수 있는 편집기면 아무거나 환영합니다.
물론 로컬에서도 개발할 수 있게 웹서버를 띄워서 개발할 수도 있습니다.

!!!! 음..뭔가 pandoc markdown을 편하게 사용할 수 있는 편집기 같은게 있었으면 좋겠네 그려

없다고 해도 괜찮습니다. 로컬에서 UI개발환경을 갖추면 실시간 바로보기가 되거든요.


## 스크린샷 이미지
레티나 대응을 위해서 고밀도 디스플레이에서 스크린샷을 촬영해서 붙여주시면 됩니다.
각 언어에 맞는 스크린샷을 만들어서 각 언어 폴더셋에 넣어주세요.




## 마크다운 파일의 상단에 있는  설정 구문
YAML template for 도움말

-   service : 
    서비스명을 적어줍니다. 파일명 등에 쓰입니다. 전부 소문자로 작성합니다.

-   title   : 
    페이지 제목을 적어줍니다. h1 등의 타이틀 엘리먼트에 사용됩니다.

-   en/ko/zh : true
    작성하는 문서가 영문/한글/중문에 따라서 기술합니다.
    **문법 규칙상 *true* 만 존재합니다.**
    `예) ko : true`

-   multiLang:
    다국어 문서의 링크 생성을 위해 기술합니다.
    기본적으로 ko/en/zh의 세가지 유형을 가집니다.

    참고사항으로 현재 기술하고 있는 문서는 반드시 반대로 설정하시거나 삭제하셔야 합니다.

    예) 
    ```
    en : true

    ...

    multiLang:
        - en : false
            ```


기본 포맷 예시



```
---
service : alertnow
title   : AlertNow
en : true
multiLang: 
    - ko : true
    - en : false
    - zh : false
        ...
        ```


[pandoc#image]: https://pandoc.org/MANUAL.html#images
[pandoc_link]: https://pandoc.org/MANUAL.html


--------------------------------------------------------------------------------

































Service channel Manual Build system
각 서비스 채널의 매뉴얼을 개발할 수 있는 저장소입니다. 현재는 ITS/opsnow만 정형화되어 있습니다.

개발의 경우는 ./source/* 의 담당 서비스에서 하시면 되고, 빌드의 경우는 ./build/* 폴더에 빌드 결과물이 쌓입니다.

가이드의 위치에 그대로 복사해서 serving 할 수 있게 구성하였습니다.

설치
아래의 명령어를 따라주세요.

console에서 명령어 npm install --save 입력 후 엔터
console에서 명령어 npm install browser-sync -g 입력 후 엔터
사용법
console에 gulp를 입력합니다.

? BSP 매뉴얼 빌더 :: 서비스를 고르세요 (Use arrow keys)
❯ ITS
OpsNow
이렇게 보이구요. 자신의 서비스에서 enter키를 클릭합니다.

저는 opsnow를 선택하겠습니다.

선택 후 다음과 같이 진행됩니다.

? 매뉴얼 개발하실건가요? build해서 배포하실건가요? (Use arrow keys)
❯ 개발
build
매뉴얼 수정이나 추가를 원하시면 개발을 선택해 주시고, 다 만든것을 배포하려 하시면 Build를 골라주세요.

scaffolding
다음과 같은 형태로 네이밍을 진행합니다.

서비스도메인(가변) / 루트폴더(고정) / 언어(가변) / 파일명.확장자(고정)
service.bespinglobal.com / doc / en / user_guide.html













